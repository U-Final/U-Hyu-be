# 🗺️ U-Hyu : 지도 기반 LG U+ 멤버십 제휴처 안내 및 추천 서비스

## 📍 프로젝트 소개

> U-HYU(유휴)는 사용자 주변의 LG U+ 멤버십 제휴처를 **지도 기반 UX**로 직관적으로 탐색하고, 다른 사용자의 이용 내역까지 함께 확인할 수 있는 **위치 기반 혜택 공유 플랫폼**입니다.  
> 개인화 추천 및 즐겨찾기, 소셜 공유를 통해 **유휴 혜택 자원의 재발견**을 유도합니다.

### 개발 기간
- 2025.07.05 ~ 2025.08.07

### 🧑🏻‍💻 역할 분담

| <img src="https://avatars.githubusercontent.com/u/127932430?v=4" width="80"><br><a href="https://github.com/djlim00">👑 임동준</a> | <img src="https://avatars.githubusercontent.com/Leesowon" width="80"><br><a href="https://github.com/Leesowon">이소원</a> | <img src="https://avatars.githubusercontent.com/etoile0626" width="80"><br><a href="https://github.com/etoile0626">최윤제</a> |
|-----------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| <ul><li>인프라</li><li>DB 모델링</li><li>지도 시스템</li></ul>                                                                                          | <ul><li>인증 / 인가 시스템</li><li>추천 시스템</li></ul>                                                             | <ul><li>회원 시스템</li><li>어드민 / 통계 시스템</li></ul>                                                                              |

### 🔗 배포 링크

https://www.u-hyu.site/


---

### 💡 기획 배경

1. **낮은 멤버십 혜택 활용률**
   - 국내 통신사 멤버십 이용률은 36% 수준 (2024, 옴디아)
   - "사용처를 몰라서", "매력 없음"이 가장 큰 이유.
   - LG U+ 기준 최근 5년간 소멸된 포인트만 233억 원 규모

2. **복잡한 구조와 정보 탐색의 어려움**
   - 혜택은 있지만 ‘어디서, 어떻게’ 쓸 수 있는지 알기 어려움
   - 기존 앱/웹은 정적 정보 중심이며, UX가 복잡하여 탐색이 불편함
   - 사용자 위치 기반의 탐색이나 실시간성 부재

3. **지도 중심 서비스 기회**
   - 모바일 쿠폰 시장 성장세 (6조 규모)
   - 사용자 위치와 실시간 혜택을 연결하는 O2O 기반 서비스 수요 증가

---

### 🎯 프로젝트 목표 및 기대효과

1. **지도에 제휴처 시각화**  
   → 사용자 위치 기반 4km 반경 내 혜택 매장을 직관적으로 탐색 가능

2. **개인화 추천 시스템 구현**
   - **비로그인 사용자**: 인기 제휴처 안내
   - **신규 사용자**: 설문 기반 방문 및 관심 브랜드 수집으로 Cold Start 완화
   - **기존 사용자**: 즐겨찾기, 액션 로그 기반 LightFM 추천

3. **실사용자 피드백 기반 추천 고도화** 
   → 추천 결과 저장 및 재학습 구조 적용 예정

4. **퍼포먼스 최적화**
   - PostGIS + 공간 인덱스 활용한 위치 쿼리 최적화
   - React Query + 클러스터링 렌더링 등 UX/성능 개선

5. **관리자 통계 시스템 구축**
   - 즐겨찾기/접속/이용 현황 기반의 정량 분석 지원
  
---

## 🚀 핵심 / 주요 기능

### 1. 추천 시스템 설계

- **사용 라이브러리** : [LightFM](https://pypi.org/project/lightfm/)   
   콘텐츠 기반 + 협업 필터링을 동시에 학습 가능한 **하이브리드 추천 라이브러리**
  
- **입력 요소**
  - `user_features`: 관심 브랜드, 최근 방문 브랜드, 즐겨찾기 브랜드, 성별, 연령대
  - `item_features`: 브랜드 id, 카테고리 id
  - `interactions`: 클릭 매장 및 카테고리에 대한 클릭 로그(action_lgos)

- **Cold Start 대응 전략**
  - 회원가입 시 **선호 브랜드 및 방문 브랜드 설문 수집**
  - 수집된 정보를 `user_features`에 반영하여 초기 추천 생성

- **추천 결과 저장 구조**
  - 추천 결과는 (user_id, brand_id, score, rank) 형태로 DB에 저장
  - spring 서버에 api 요청을 통해 추천 결과 조회

> ✅ 사용자 데이터 부족 상황에서도 유의미한 초기 추천 가능  
> ✅ 추천 서버와 서비스 로직 간의 분리 설계로 확장성 확보

추천 결과 예시

<img width="1052" height="170" alt="Image" src="https://github.com/user-attachments/assets/7b4c0a91-4867-45e1-bab4-b8988bc1fb75" />

#### 🔍 추천 방식 안내

로그인 여부에 따라 추천 방식이 달라집니다.

- **비로그인 사용자**: 전체 사용자 중 가장 많이 방문한 브랜드 Top 3를 제공  
- **로그인 사용자**: 개인화 추천 시스템을 기반으로 추천된 브랜드 Top 3를 제공

### 2. 관리자 통계 관리 시스템

- 관리자에게 전체 사용자의 이용 데이터를 토대로 통계 데이터를 조회할 수 있는 기능 제공
- 전체 사용자들의 즐겨찾기(+My Map) 데이터, 어느 카테고리를 사용해 지도 필터링을 이용했는지, 어떤 브랜드들이 자주 추천 받았는지, 멤버십은 얼마나 사용했는지 등의 다양한 통계 데이터를 카테고별, 카테고리 내 브랜드별로 조회 가능
- QueryDSL 기반 쿼리를 통한 복잡하고 동적인 통계 데이터 조회 쿼리 작성 완료

### 3. My Map

- 단순 즐겨찾기뿐만 아니라 제휴 매장을 나만의 카테고리에 저장하여 관리하는 기능
- 사용자의 각 My Map에 고유한 uuid를 할당하여 uuid를 기반으로 My Map 조회 및 타 사용자들에게 공유, 비로그인 사용자도 타인의 My Map url이 존재할 시 타인의 My Map 조회 가능
- My Map에 속한 제휴 매장의 경우 각 My Map에 지정한 색으로 마커 색 변경하여 지도에 표시됨

---

## 기술스택

<img width="755" height="703" alt="Image" src="https://github.com/user-attachments/assets/821c2e99-a95a-4276-a05e-201e0254d80f" />

---

## 아키텍쳐

### ☁️ 인프라 구성

| 항목 | 기술 |
|------|------|
| 클라우드 | AWS EC2 (Spring, Python), RDS (PostgreSQL + PostGIS), S3 |
| 배포 | Docker, GitHub Actions (CI/CD) |
| 인증 | Kakao OAuth2 + Spring Security + JWT |

---

## ERD

<img width="1465" height="959" alt="image" src="https://github.com/user-attachments/assets/c61e625b-4ac7-4c35-b6a5-daa592f924d9" />

---

### 🧩 데이터 모델링 및 추천 시스템 설계 고민

#### ✅ 문제 상황

1. **방문 정보의 이중 관리**  
   - 사용자 온보딩 과정에서 **방문한 브랜드** 정보를 수집하고,
   - 이후 앱 이용 중에는 **실제 매장 방문 기록**이 저장됨  
   → 결국 두 데이터 모두 방문 정보지만, `recommendation_base_data`와 `history`라는 **서로 다른 테이블**에 저장되고 있음

2. **데이터 복사 전략의 한계**  
   - 추천 배치마다 `history` 데이터를 `recommendation_base_data`로 **복사**하는 방안도 고려했으나  
     → **데이터 이중화** 및 **정합성 문제** 발생  
     → 유지보수 및 데이터 관리에 불리

#### 🔍 최종 설계 결정

- **관심 브랜드**와 **방문 브랜드/매장 정보**를 **명확히 분리된 테이블**에 저장
- 온보딩에서 입력받은 **방문 브랜드**에 대해서 `store_id = null`로 저장되지만, 초반에 최대 3개의 정보만 받아 수용 가능하다고 판단
- `recommendation_base_data`는 **관심 브랜드 (DataType = INTEREST)** 저장
- 테이블 명은 **추천 기반 데이터의 확장 가능성**을 고려하여 `recommendation_base_data` 그대로 유지

#### 🧐 기타 고려 사항

- **관심 브랜드를 `users` 테이블에 직접 저장하지 않음**  
  → 추천 전용 도메인으로 분리하여 관리하는 것이 유지보수 및 확장성 측면에서 바람직
- 추천 로직은  
  - 초기 추천: `recommendation_base_data` 사용  

---

#
