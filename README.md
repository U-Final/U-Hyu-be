# 🗺️ U-Hyu : 지도 기반 LG U+ 멤버십 제휴처 안내 및 추천 서비스

## 📍 프로젝트 소개

> U-HYU(유휴)는 사용자 주변의 LG U+ 멤버십 제휴처를 **지도 기반 UX**로 직관적으로 탐색하고, 다른 사용자의 이용 내역까지 함께 확인할 수 있는 **위치 기반 혜택 공유 플랫폼**입니다.  
> 개인화 추천 및 즐겨찾기, 소셜 공유를 통해 **유휴 혜택 자원의 재발견**을 유도합니다.

### 개발 기간
- 2025.07.05 ~ 2025.08.07

### 🧑🏻‍💻 역할 분담

| <img src="https://avatars.githubusercontent.com/u/127932430?v=4" width="80"><br><a href="https://github.com/djlim00">👑 임동준</a> | <img src="https://avatars.githubusercontent.com/Leesowon" width="80"><br><a href="https://github.com/Leesowon">이소원</a> | <img src="https://avatars.githubusercontent.com/etoile0626" width="80"><br><a href="https://github.com/etoile0626">최윤제</a> |
|-----------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| <ul><li>인프라</li><li>DB 모델링</li><li>지도 시스템</li></ul>                                                                                          | <ul><li>인증 / 인가 시스템</li><li>추천 시스템</li></ul>                                                             | <ul><li>회원 시스템</li><li>어드민 / 통계 시스템</li></ul>                                                                              |

### 🔗 배포 링크


---

### 💡 기획 배경

1. **낮은 멤버십 혜택 활용률**
   - 국내 통신사 멤버십 이용률은 36% 수준 (2024, 옴디아)
   - "사용처를 몰라서", "매력 없음"이 가장 큰 이유.
   - LG U+ 기준 최근 5년간 소멸된 포인트만 233억 원 규모

2. **복잡한 구조와 정보 탐색의 어려움**
   - 혜택은 있지만 ‘어디서, 어떻게’ 쓸 수 있는지 알기 어려움
   - 기존 앱/웹은 정적 정보 중심이며, UX가 복잡하여 탐색이 불편함
   - 사용자 위치 기반의 탐색이나 실시간성 부재

3. **지도 중심 서비스 기회**
   - 모바일 쿠폰 시장 성장세 (6조 규모)
   - 사용자 위치와 실시간 혜택을 연결하는 O2O 기반 서비스 수요 증가

---

### 🎯 프로젝트 목표 및 기대효과

1. **지도에 제휴처 시각화**  
   → 사용자 위치 기반 1km 반경 내 혜택 매장을 직관적으로 탐색 가능

2. **개인화 추천 시스템 구현**
   - **비로그인 사용자**: 인기 제휴처 기반 추천
   - **신규 사용자**: 설문 기반 방문 및 관심 브랜드 수집으로 Cold Start 완화
   - **기존 사용자**: 즐겨찾기, 방문 로그, 클릭 기록 기반 LightFM 추천

3. **실사용자 피드백 기반 추천 고도화**  
   → 추천 결과 저장 및 재학습 구조 적용 예정

4. **퍼포먼스 최적화**
   - PostGIS + 공간 인덱스 활용한 위치 쿼리 최적화
   - React Query + 클러스터링 렌더링 등 UX/성능 개선

5. **관리자 통계 시스템 구축**
   - 즐겨찾기/접속/이용 현황 기반의 정량 분석 지원
  
---

## 🚀 핵심 / 주요 기능

### 1. 추천 시스템 설계

- **사용 라이브러리** : [LightFM](https://pypi.org/project/lightfm/)   
   콘텐츠 기반 + 협업 필터링을 동시에 학습 가능한 **하이브리드 추천 라이브러리**
- **입력 요소**
  - `interactions`: 즐겨찾기, 클릭 로그, 방문 기록 등 행동 기반 피드백
  - `user_features`: 관심 브랜드, 최근 방문 브랜드, 성별, 연령대
  - `item_features`: 매장 카테고리, 위치, 브랜드 정보

- **Cold Start 대응 전략**
  - 회원가입 시 **선호 브랜드 및 방문 브랜드 설문 수집**
  - 수집된 정보를 `user_features`에 반영하여 초기 추천 생성
  - 행동 로그가 누적될수록 협업 필터링 가중치 증가

- **추천 결과 저장 구조 (예정)**
  - 추천 결과는 (user_id, store_id, score, rank) 형태로 DB에 저장
  - Spring 서버에서는 FastAPI로부터 학습 결과만 조회

> ✅ 사용자 데이터 부족 상황에서도 유의미한 초기 추천 가능  
> ✅ 추천 서버와 서비스 로직 간의 분리 설계로 확장성 확보

---

## 기술스택

<img width="494" height="679" alt="Image" src="https://github.com/user-attachments/assets/c8058fa8-734b-4453-8c8a-f5f20bd942b4" />

---

## 아키텍쳐

### ☁️ 인프라 구성

| 항목 | 기술 |
|------|------|
| 클라우드 | AWS EC2 (Spring), RDS (PostgreSQL + PostGIS), S3 |
| 배포 | Docker, GitHub Actions (CI/CD) |
| 인증 | Kakao OAuth2 + Spring Security + JWT |
| 추천 시스템 | FastAPI 서버 (LightFM 모델 서빙) |

---

## ERD

<img width="1504" height="845" alt="Image" src="https://github.com/user-attachments/assets/efa7c64e-f8eb-4a93-864b-3d5024005efd" />

### 💭 데이터 모델링 및 추천 시스템 설계 고민

추천 시스템에 활용될 **사용자 행동 로그(action_logs)**에는 `store_id`만 저장하고,  
브랜드 정보는 **추천 배치 수행 시 join 쿼리로 동적으로 가져오는 방식**을 채택하였습니다.

#### 🤔 고민한 배경

- **외래키 사용 최소화에 대한 판단**  
  실무에서는 성능과 유연성을 고려해 외래키를 직접 지정하지 않는 경우가 많다고 알고 있음
  → 배치 쿼리에서 필요한 시점에 join하여 유연하게 처리

- **데이터 중복 vs 조회 성능**  
  - 행동 로그에 브랜드 정보를 중복 저장하면 배치 시 join 비용은 줄일 수 있음  
  - 하지만 매장과 브랜드는 1:N 관계
  - 브랜드는 자주 바뀌지 않음 (정합성 유지가 더 중요)
  → join 비용이 낮고, 저장 공간 최적화 및 정규화를 유지할 수 있음

- **배치 처리 관점의 효율성 고려**  
  - 추천은 실시간이 아닌 **비동기 배치 방식**으로 설계  
  - 배치 쿼리에서 `store_id` → `brand_id`를 매핑하는 join은 충분히 감당 가능한 수준으로 판단

#### 🔍 결론

> 따라서 `action_logs` 테이블은 단순하게 유지하고,  
> 추천 배치 시점에 필요한 브랜드/카테고리 정보는 매장 테이블과의 **join**으로 조회하는 구조로 설계하였습니다.

→ 추천 알고리즘 측면에서는 `brand_id`는 `item_features`를 학습 시점에만 필요로 하며,  
이러한 feature들은 batch 시점에 생성되어 캐싱/저장되므로 실시간 시스템에는 영향을 주지 않도록 분리 설계하였습니다. 


---

#
